---
layout:     post
title:      "Git"
subtitle:   " \"Git操作整理\""
date:       2018-03-07 12:00:00
author:     "Hanamichi"
header-img: "img/spacex-2.jpg"
catalog: true
tags:
    - Linux
---

## Git设置

### Git使用socks5代理

`git config --global http.proxy 'socks5://127.0.0.1:1080' `

`git config --global https.proxy 'socks5://127.0.0.1:1080' `

## Git常用命令

### 分支操作

1. 创建分支: `git checkout -b branch_name`
2.  查看全部分支: `git branch -av`
3. 合并分支: `git merge --no-ff branch_name`

### Tag操作

1. 列出所有tag: `git tag`

2. 创建标签

   1. 创建轻量标签: `git tag tag_name`
   2. 创建附注标签: `git tag -a tag_name`

   git标签分为两种类型：轻量标签和附注标签。轻量标签是指向提交对象的引用，附注标签则是仓库中的一个独立对象。建议使用附注标签。

3. 切换到标签: `git checkout tag_name`

4. 查看标签版本信息: `git show tag_name`

5. 删除标签: `git tag -d tag_name`

6. 发布标签

   1. 发布指定标签: `git push origin tag_name`
   2. 发布所有标签: `git push origin --tag`

### 撤销本地修改

`git reset --hard HEAD`

### 查看分支的合并情况

 `git log --graph --pretty=oneline --abbrev-commit`

## Git使用流程规范

### step1 新建分支

每次开发新功能，都应该新建一个单独的分支

```bash
#获取主干代码
git checkout master
git pull

#新建feature分支
git checkout -b feature
```

### step2 提交分支commit

```bash
git add --all / git add
git status
git commit -m --verbose
```

git commit 命令的verbose参数，会列出 diff 的结果

### step3 撰写提交信息

提交commit时，必须给出完整扼要的提交信息，下面是一个范本:

```
Present-tense summary under 50 characters  

* More information about commit (under 72 characters). 
* More information about commit (under 72 characters).  

http://project.management-system.com/ticket/123 
```

第一行是不超过50个字的提要，然后空一行，罗列出改动原因、主要变动、以及需要注意的问题。最后，提供对应的网址（比如Bug ticket）

### step4 与主干同步

```bash
git fetch origin
git rebase origin/master
```

### step5 合并commit

。。。待完善

### step6 推送到远程仓库

```bash
git push --force origin feature
```

git push命令要加上force参数，因为rebase以后，分支历史改变了，跟远程分支不一定兼容，有可能要强行推送

### step7 发出pull request

提交到远程仓库以后，就可以发出 Pull Request 到master分支，然后请求别人进行代码review，确认可以合并到master

## Git分支管理策略

http://www.ruanyifeng.com/blog/2012/07/git.html

